(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{30:function(e,t,n){e.exports=n(49)},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(17),c=n.n(l),i=n(19),o=n(7),s=n(13),u=n(28),d=n(29),p={email:""},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_EMAIL":return{email:t.email};default:return e}},E=n(23),h=n(3),b={currencies:[],expenses:[],removed:[],editExpense:!1,expenseSelected:[]},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CURRENCY":return Object(h.a)(Object(h.a)({},e),{},{currencies:Object(E.a)(t.currencies)});case"SAVE_EXPENSE":return Object(h.a)(Object(h.a)({},e),{},{expenses:[].concat(Object(E.a)(e.expenses),[t.expense])});case"ATT_EXPENSES":return Object(h.a)(Object(h.a)({},e),{},{expenses:e.expenses.map((function(n){return n.id===t.expensesAtt.id?t.expensesAtt:e.expenses}))});case"REMOVE_EXPENSE":return Object(h.a)(Object(h.a)({},e),{},{removed:t.expense,expenses:t.listAtt});case"EDIT_EXPENSE":return Object(h.a)(Object(h.a)({},e),{},{editExpense:t.bool});case"SELECTED_EXPENSE":return Object(h.a)(Object(h.a)({},e),{},{expenseSelected:t.expense});default:return e}},f=Object(s.combineReducers)({user:m,wallet:v}),x=Object(s.createStore)(f,Object(u.composeWithDevTools)(Object(s.applyMiddleware)(d.a))),g=n(2),j=n(15),O=n(9),y=n(10),C=n(12),S=n(11),w=function(e){return{type:"EDIT_EXPENSE",bool:e}};function k(){return function(e){return e({type:"REQUEST_REALIZED"}),fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()})).then((function(t){return e(function(e){return{type:"GET_CURRENCY",currencies:Object.keys(e).filter((function(e){return"USDT"!==e}))}}(t))})).catch((function(){return e({type:"REQUEST_FAILURE"})}))}}n(41);var A=function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this)).handleChange=function(t){var n=t.target;e.setState(Object(j.a)({},n.name,n.value))},e.handleClick=function(){var t=e.state.email,n=e.props,a=n.savingEmail,r=n.history;a(t),r.push("/carteira")},e.validate=function(){var t=e.state,n=t.email,a=t.pass;if(!/\S+@\S+\.com/.test(n)||a.length<6)return!0},e.state={email:"",pass:""},e}return Object(y.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login-box"},r.a.createElement("h1",null," Login "),r.a.createElement("label",{htmlFor:"email-input",className:"login-label"},"Email",r.a.createElement("input",{type:"email",name:"email","data-testid":"email-input",onChange:this.handleChange,className:"login-input"})),r.a.createElement("label",{htmlFor:"password-input",className:"login-label"},"Senha",r.a.createElement("input",{type:"password",name:"pass","data-testid":"password-input",onChange:this.handleChange,className:"login-input"})),r.a.createElement("button",{type:"submit",disabled:this.validate(),onClick:this.handleClick,className:"login-button"},"Entrar")))}}]),n}(r.a.Component),R=Object(o.b)(null,(function(e){return{savingEmail:function(t){return e({type:"SAVE_EMAIL",email:t})}}}))(A),N=(n(42),function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(y.a)(n,[{key:"totalExpenses",value:function(e){return e.reduce((function(e,t){return+(e+=+t.value*+t.exchangeRates[t.currency].ask)}),0).toFixed(2)}},{key:"render",value:function(){var e=this.props,t=e.email,n=e.expenses;return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header-email","data-testid":"email-field"},0===t.length?"teste@teste.com":t),r.a.createElement("div",{className:"header-totalExpense"},r.a.createElement("p",null,"Despesa total: "),r.a.createElement("span",null,"R$",r.a.createElement("p",{"data-testid":"total-field"},void 0===n||0===n.length?0:this.totalExpenses(n))),r.a.createElement("p",{"data-testid":"header-currency-field"},"BRL")))}}]),n}(r.a.Component)),T=Object(o.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}),null)(N),_=(n(43),function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this)).handleChange=function(t){var n=t.target;e.setState(Object(j.a)({},n.name,n.value))},e.handleClick=function(t){var n=t.target.name,a=e.props,r=a.savingExpense,l=a.btnEditExpense,c=a.state,i=a.savingExpensesEdit;if("add"===n&&(r(Object(h.a)({},e.state)),e.setState((function(e){return{value:0,description:"",id:e.id+1}}))),"edit"===n){var o=e.state,s=o.value,u=o.description,d=o.method,p=o.tag,m=Object(h.a)(Object(h.a)({},c),{},{value:s,description:u,tag:p,method:d});l(!1),i(m)}},e.state={value:0,description:"teste",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o",id:0},e}return Object(y.a)(n,[{key:"render",value:function(){var e=this.state,t=e.value,n=e.description,a=e.method,l=e.tag,c=e.currency,i=this.props,o=i.currencies,s=i.editExpenseBool;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"value-input"},"Valor da despesa",r.a.createElement("input",{type:"number","data-testid":"value-input",name:"value",value:t,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"description-input"},"Descri\xe7\xe3o da despesa",r.a.createElement("input",{type:"text","data-testid":"description-input",name:"description",value:n,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"moeda"},"Moeda",r.a.createElement("select",{id:"moeda",name:"currency","data-testid":"currency-input",onChange:this.handleChange,value:c},o.map((function(e){return r.a.createElement("option",{key:e},e)})))),r.a.createElement("label",{htmlFor:"method-input"},"M\xe9todo de pagamento",r.a.createElement("select",{id:"method-input","data-testid":"method-input",name:"method",value:a,onChange:this.handleChange},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag-input"},"Categoria",r.a.createElement("select",{id:"tag-input","data-testid":"tag-input",name:"tag",onChange:this.handleChange,value:l},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade"))),r.a.createElement("button",{type:"button",name:s?"edit":"add",onClick:this.handleClick},s?"Editar despesa":"Adicionar despesa")))}}]),n}(r.a.Component)),D=Object(o.b)((function(e){return{currencies:e.wallet.currencies,expenses:e.wallet.expenses,editExpenseBool:e.wallet.editExpense}}),(function(e){return{savingExpense:function(t){return e(function(e){return function(t){return t({type:"REQUEST_REALIZED"}),fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()})).then((function(n){return t(function(e){return{type:"SAVE_EXPENSE",expense:e}}(Object(h.a)(Object(h.a)({},e),{},{exchangeRates:n})))})).catch((function(){return t({type:"REQUEST_FAILURE"})}))}}(t))},btnEditExpense:function(t){return e(w(t))},savingExpensesEdit:function(t){return e({type:"ATT_EXPENSES",expensesAtt:t})}}}))(_),F=(n(44),function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(){var e;Object(O.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).removeExpense=function(t){var n=t.target,a=e.props,r=a.expenses,l=a.removedExpense,c=n.name,i=r.filter((function(e){return e.id!==+c}));l(r.filter((function(e){return e.id===+c})),i)},e.attExpense=function(t){var n=e.props,a=n.btnEditExpense;(0,n.getExpense)(t),a(!0)},e}return Object(y.a)(n,[{key:"transform",value:function(e){var t=e.currency;return+e.exchangeRates[t].ask}},{key:"render",value:function(){var e=this,t=this.props.expenses;return r.a.createElement("div",{className:"table-div"},r.a.createElement("table",null,r.a.createElement("caption",null,r.a.createElement("h2",null," Tabela de Gastos ")),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir")),t.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,"".concat(t.value,".00")),r.a.createElement("td",null,t.exchangeRates[t.currency].name.split("/")[0]),r.a.createElement("td",null,e.transform(t).toFixed(2)),r.a.createElement("td",null,(t.value*e.transform(t)).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button",name:t.id,"data-testid":"edit-btn",onClick:function(){return e.attExpense(t)}},"Editar"),r.a.createElement("button",{type:"reset",name:t.id,"data-testid":"delete-btn",onClick:e.removeExpense},"Excluir")))})))))}}]),n}(a.Component)),L=Object(o.b)((function(e){return{expenses:e.wallet.expenses,expensesAtt:e.wallet.listExpensesAtt,editExpenseBool:e.wallet.editExpense}}),(function(e){return{removedExpense:function(t,n){return e({type:"REMOVE_EXPENSE",expense:t,listAtt:n})},btnEditExpense:function(t){return e(w(t))}}}))(F),M=function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this)).getExpenseSelected=function(t){e.setState({expenseSelected:t})},e.state={expenseSelected:[]},e}return Object(y.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.initialRequest)()}},{key:"render",value:function(){var e=this.state.expenseSelected;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(T,null)),r.a.createElement("div",null,r.a.createElement(D,{state:e})),r.a.createElement("div",null,r.a.createElement(L,{getExpense:this.getExpenseSelected})))}}]),n}(r.a.Component),U=Object(o.b)(null,(function(e){return{initialRequest:function(){return e(k())}}}))(M);var I=function(){return r.a.createElement("div",null,r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/",component:R}),r.a.createElement(g.a,{exact:!0,path:"/carteira",component:U})))};n(48),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(i.a,null,r.a.createElement(o.a,{store:x},r.a.createElement(I,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.a91e6522.chunk.js.map